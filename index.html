<!--
 * @Author: TerryMin
 * @Date: 2024-10-23 14:30:58
 * @LastEditors: TerryMin
 * @LastEditTime: 2025-02-21 17:31:21
 * @Description: file not
-->
<!DOCTYPE html>
<html lang="en">
  <body>
    <ul>
      <ul>
        <li><a href="/home">home</a></li>
        <li><a href="/about">about</a></li>

        <div id="routeView"></div>
      </ul>
    </ul>
  </body>
  <script>
    // 编写一个函数，将arr1和arr2合并，并按照id排序，如果id相同则取time较大的那个对象，如果id不同则保留arr1和arr2中的对象。
    // 输入数据 arr1，arr2
    const arr1 = [
      {
        id: 1,
        name: "allen",
        time: "3",
      },
      {
        id: 2,
        name: "alice",
        time: "1",
      },
      {
        id: 9,
        name: "Bun",
        time: "1",
      },
      {
        id: 3,
        name: "Bun",
        time: "1",
      },
    ];
    const arr2 = [
      {
        id: 1,
        name: "bob",
        time: "4",
      },
      {
        id: 2,
        name: "Nick",
        time: "2",
      },
      {
        id: 4,
        name: "Mark",
        time: "2",
      },
      {
        id: 5,
        name: "Frank",
        time: "6",
      },
    ];

    // 输出结果 res
    // const res = [
    //     {
    //         id: 1,
    //         name: 'bob',
    //         time: '4'
    //     },
    //     {
    //         id: 2,
    //         name: 'Nick',
    //         time: '2'
    //     },
    //     {
    //         id: 3,
    //         name: 'Bun',
    //         time: '1'
    //     },
    //     {
    //         id: 4,
    //         name: 'Mark',
    //         time: '2'
    //     },
    //     {
    //         id: 5,
    //         name: 'Frank',
    //         time: '6'
    //     },
    // ]

    function mergeAndSort(arr1, arr2) {
      const mergeArr = [...arr1, ...arr2];
      let idMap = {};
      mergeArr.forEach((item) => {
        const { id, time } = item;
        if (!idMap[id]) {
          idMap[id] = item;
        } else {
          if (idMap[id].time < time) {
            idMap[id] = item;
          }
        }
      });
      const resultArr = Object.values(idMap);
      resultArr.sort((a, b) => a.id - b.id);
      return resultArr;
    }
    // console.log(mergeAndSort(arr1, arr2));

    setTimeout(() => {
      console.log(1);
    }, 0);
    new Promise((resolve, reject) => {
      console.log(2);
      for (let i = 0; i < 10000; i++) {
        i === 9999 && resolve();
      }
      console.log(3);
    }).then(() => {
      console.log(4);
    });
    console.log(5);
    
    Array.prototype.reduce = function (reducer, initVal) {
      for (let i = 0; i < this.length; i++) {
        initVal = reducer(initVal, this[i], i, this);
      }
      return initVal;
    };
  </script>
</html>
